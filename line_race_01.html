
<!DOCTYPE html>
<html lang="zh" style="height: 100%">
<head>
  <meta charset="utf-8">
  <title>广西各市进出口贸易额（2012–2022）</title>
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 100%"></div>
  <script src="https://fastly.jsdelivr.net/npm/echarts@5"></script>
  <script>
    var myChart = echarts.init(document.getElementById('container'));
    var rawData = [[2012, "南宁", 2606459.0], [2013, "南宁", 2695543.0], [2014, "南宁", 2957253.0], [2015, "南宁", 3652678.0], [2016, "南宁", 4162345.0], [2017, "南宁", 6070866.0], [2018, "南宁", 7400454.0], [2019, "南宁", 7477891.0], [2020, "南宁", 9858849.0], [2021, "南宁", 12311944.0], [2022, "南宁", 15100737.0], [2012, "柳州", 1956261.0], [2013, "柳州", 1758523.0], [2014, "柳州", 1393363.0], [2015, "柳州", 1385706.0], [2016, "柳州", 1353756.0], [2017, "柳州", 1722399.0], [2018, "柳州", 1733486.0], [2019, "柳州", 2191028.0], [2020, "柳州", 2318018.0], [2021, "柳州", 3535109.0], [2022, "柳州", 2992330.0], [2012, "桂林", 612755.0], [2013, "桂林", 563171.0], [2014, "桂林", 579441.0], [2015, "桂林", 574684.0], [2016, "桂林", 590191.0], [2017, "桂林", 700117.0], [2018, "桂林", 724650.0], [2019, "桂林", 705771.0], [2020, "桂林", 720010.0], [2021, "桂林", 916073.0], [2022, "桂林", 957430.0], [2012, "梧州", 760784.0], [2013, "梧州", 1076139.0], [2014, "梧州", 767543.0], [2015, "梧州", 569089.0], [2016, "梧州", 405743.0], [2017, "梧州", 602406.0], [2018, "梧州", 507583.0], [2019, "梧州", 658527.0], [2020, "梧州", 644850.0], [2021, "梧州", 800865.0], [2022, "梧州", 1267939.0], [2012, "北海", 1306253.0], [2013, "北海", 1645145.0], [2014, "北海", 2150113.0], [2015, "北海", 2359005.0], [2016, "北海", 2047644.0], [2017, "北海", 2308381.0], [2018, "北海", 3205861.0], [2019, "北海", 2941002.0], [2020, "北海", 2687232.0], [2021, "北海", 3001521.0], [2022, "北海", 3440731.0], [2012, "防城港", 3078801.0], [2013, "防城港", 2621850.0], [2014, "防城港", 924642.0], [2015, "防城港", 1438662.0], [2016, "防城港", 5789124.0], [2017, "防城港", 7685445.0], [2018, "防城港", 7189848.0], [2019, "防城港", 8049484.0], [2020, "防城港", 7083267.0], [2021, "防城港", 8855611.0], [2022, "防城港", 7845687.0], [2012, "钦州", 2367471.0], [2013, "钦州", 2152462.0], [2014, "钦州", 3276912.0], [2015, "钦州", 3626670.0], [2016, "钦州", 2921011.0], [2017, "钦州", 3404673.0], [2018, "钦州", 2273275.0], [2019, "钦州", 2042392.0], [2020, "钦州", 2177208.0], [2021, "钦州", 2560273.0], [2022, "钦州", 6421881.0], [2012, "贵港", 145472.0], [2013, "贵港", 134882.0], [2014, "贵港", 187991.0], [2015, "贵港", 200758.0], [2016, "贵港", 187879.0], [2017, "贵港", 238816.0], [2018, "贵港", 276299.0], [2019, "贵港", 389127.0], [2020, "贵港", 361457.0], [2021, "贵港", 457562.0], [2022, "贵港", 506276.0], [2012, "玉林", 369631.0], [2013, "玉林", 254113.0], [2014, "玉林", 299043.0], [2015, "玉林", 280630.0], [2016, "玉林", 266793.0], [2017, "玉林", 336580.0], [2018, "玉林", 348498.0], [2019, "玉林", 401653.0], [2020, "玉林", 315399.0], [2021, "玉林", 388607.0], [2022, "玉林", 434381.0], [2012, "百色", 319718.0], [2013, "百色", 364509.0], [2014, "百色", 447510.0], [2015, "百色", 1021220.0], [2016, "百色", 1380719.0], [2017, "百色", 1884397.0], [2018, "百色", 2172681.0], [2019, "百色", 2618062.0], [2020, "百色", 3330395.0], [2021, "百色", 4263338.0], [2022, "百色", 3857864.0], [2012, "贺州", 97985.0], [2013, "贺州", 121639.0], [2014, "贺州", 106309.0], [2015, "贺州", 64258.0], [2016, "贺州", 51915.0], [2017, "贺州", 48443.0], [2018, "贺州", 98973.0], [2019, "贺州", 143773.0], [2020, "贺州", 175306.0], [2021, "贺州", 212625.0], [2022, "贺州", 260057.0], [2012, "河池", 329637.0], [2013, "河池", 293554.0], [2014, "河池", 294423.0], [2015, "河池", 243762.0], [2016, "河池", 181096.0], [2017, "河池", 195498.0], [2018, "河池", 274767.0], [2019, "河池", 303147.0], [2020, "河池", 452546.0], [2021, "河池", 584903.0], [2022, "河池", 587586.0], [2012, "来宾", 90015.0], [2013, "来宾", 72949.0], [2014, "来宾", 65661.0], [2015, "来宾", 41834.0], [2016, "来宾", 58873.0], [2017, "来宾", 77312.0], [2018, "来宾", 83737.0], [2019, "来宾", 91259.0], [2020, "来宾", 110671.0], [2021, "来宾", 132289.0], [2022, "来宾", 165399.0], [2012, "崇州", 4484440.0], [2013, "崇州", 6265863.0], [2014, "崇州", 9026420.0], [2015, "崇州", 12529629.0], [2016, "崇州", 12307305.0], [2017, "崇州", 13388082.0], [2018, "崇州", 14753336.0], [2019, "崇州", 18933912.0], [2020, "崇州", 18444742.0], [2021, "崇州", 21271089.0], [2022, "崇州", 22197037.0]];

    var cities = [...new Set(rawData.map(item => item[1]))];
    var datasetWithFilters = [];
    var seriesList = [];

    cities.forEach(city => {
      var datasetId = 'dataset_' + city;
      datasetWithFilters.push({
        id: datasetId,
        fromDatasetId: 'dataset_raw',
        transform: {
          type: 'filter',
          config: {
            and: [
              { dimension: 'Year', gte: 2012 },
              { dimension: 'City', '=': city }
            ]
          }
        }
      });
      seriesList.push({
        type: 'line',
        datasetId: datasetId,
        showSymbol: false,
        name: city,
        endLabel: {
          show: true,
          formatter: function (params) {
            return params.value[1] + ': ' + params.value[2].toFixed(0);
          }
        },
        labelLayout: {
          moveOverlap: 'shiftY'
        },
        emphasis: {
          focus: 'series'
        },
        encode: {
          x: 'Year',
          y: 'Value',
          label: ['City', 'Value'],
          itemName: 'Year',
          tooltip: ['Value']
        }
      });
    });

    var option = {
      animationDuration: 10000,
      dataset: [
        {
          id: 'dataset_raw',
          source: rawData.map(item => {
            return {
              Year: item[0],
              City: item[1],
              Value: item[2]
            };
          })
        },
        ...datasetWithFilters
      ],
      title: {
        text: '广西各市进出口贸易额（2012–2022）'
      },
      tooltip: {
        order: 'valueDesc',
        trigger: 'axis'
      },
      xAxis: {
        type: 'category',
        nameLocation: 'middle'
      },
      yAxis: {
        name: '进出口总额（万元）'
      },
      grid: {
        right: 140
      },
      series: seriesList
    };

    myChart.setOption(option);
    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>
